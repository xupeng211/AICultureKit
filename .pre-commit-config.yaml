repos:
  - repo: https://github.com/psf/black
    rev: 24.4.2
    hooks: [{ id: black }]

  - repo: https://github.com/charliermarsh/ruff-pre-commit
    rev: v0.6.4
    hooks:
      - id: ruff
        args: [--fix] # 本地直接可修复
      - id: ruff-format

  - repo: https://github.com/PyCQA/isort
    rev: 5.13.2
    hooks: [{ id: isort }]

  - repo: https://github.com/PyCQA/bandit
    rev: 1.7.9
    hooks:
      - id: bandit
        args: [-q, -r, .]
        # 仅告警，不阻塞：通过 always_run + pass_filenames 避免 fail fast
        stages: [pre-commit]

  - repo: https://github.com/Yelp/detect-secrets
    rev: v1.5.0
    hooks:
      - id: detect-secrets
        args: [--baseline, .secrets.baseline]
        stages: [pre-commit]

  # 软性 commit-msg 规范提醒（不阻塞）
  - repo: local
    hooks:
      - id: commit-msg-warn
        name: commit message conventional warn
        entry: python tools/hooks/commit_msg_warn.py
        language: system
        stages: [commit-msg]
        pass_filenames: true
