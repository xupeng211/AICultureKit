# AICultureKit æ™ºèƒ½è‡ªåŠ¨åŒ– pre-commit é…ç½®
# è‡ªåŠ¨ä¿®å¤ä»£ç è´¨é‡é—®é¢˜ï¼Œç¡®ä¿å¼€å‘æ–‡åŒ–ä¸€è‡´æ€§

repos:
  # ğŸ¨ Python ä»£ç æ ¼å¼åŒ– (è‡ªåŠ¨ä¿®å¤)
  - repo: https://github.com/psf/black
    rev: 23.12.1
    hooks:
      - id: black
        language_version: python3
        args: [--line-length=88]
        stages: [commit, manual]

  # ğŸ“¦ Python å¯¼å…¥æ’åº (è‡ªåŠ¨ä¿®å¤)
  - repo: https://github.com/pycqa/isort
    rev: 5.13.2
    hooks:
      - id: isort
        args: [--profile=black, --line-length=88]
        stages: [commit, manual]

  # ğŸ§¹ è‡ªåŠ¨ç§»é™¤æœªä½¿ç”¨çš„å¯¼å…¥
  - repo: https://github.com/PyCQA/autoflake
    rev: v2.2.1
    hooks:
      - id: autoflake
        args: [
          --in-place,
          --remove-all-unused-imports,
          --remove-unused-variables,
          --remove-duplicate-keys,
          --expand-star-imports
        ]
        stages: [commit, manual]

  # ğŸ” Python ä»£ç æ£€æŸ¥ (éé˜»å¡ï¼Œä»…è­¦å‘Š)
  - repo: https://github.com/pycqa/flake8
    rev: 7.0.0
    hooks:
      - id: flake8
        exclude: ^(aiculture-env/|\.venv/|venv/|tests/)
        stages: [manual]  # åªåœ¨æ‰‹åŠ¨è¿è¡Œæ—¶æ£€æŸ¥ï¼Œä¸é˜»å¡æäº¤

  # ğŸ”§ Python ç±»å‹æ£€æŸ¥ (éé˜»å¡)
  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.8.0
    hooks:
      - id: mypy
        additional_dependencies: [types-PyYAML, types-requests, types-click]
        args: [--ignore-missing-imports, --no-error-summary]
        exclude: ^(aiculture-env/|\.venv/|venv/|tests/)
        stages: [manual]  # åªåœ¨æ‰‹åŠ¨è¿è¡Œæ—¶æ£€æŸ¥

  # ğŸ§ª è‡ªåŠ¨è¿è¡Œå¿«é€Ÿæµ‹è¯•
  - repo: local
    hooks:
      - id: quick-tests
        name: å¿«é€Ÿæµ‹è¯•æ£€æŸ¥
        entry: python -m pytest tests/ -x --tb=no -q
        language: system
        stages: [commit]
        pass_filenames: false

  # Python å®‰å…¨æ£€æŸ¥ (æš‚æ—¶ç¦ç”¨ï¼Œé…ç½®é—®é¢˜)
  # - repo: https://github.com/PyCQA/bandit
  #   rev: 1.7.5
  #   hooks:
  #     - id: bandit
  #       args: [-r, aiculture, -s, B101,B601]
  #       exclude: ^(tests/|aiculture-env/|\.venv/|venv/)

  # é€šç”¨æ–‡ä»¶æ£€æŸ¥
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
      - id: check-yaml
      - id: check-json
      - id: check-toml
      - id: check-merge-conflict
      - id: check-added-large-files
        args: [--maxkb=1000]
      - id: detect-private-key

  # å¯†é’¥æ³„æ¼æ£€æµ‹ (æš‚æ—¶ç¦ç”¨ï¼Œç‰ˆæœ¬å…¼å®¹é—®é¢˜)
  # - repo: https://github.com/Yelp/detect-secrets
  #   rev: v1.4.0
  #   hooks:
  #     - id: detect-secrets
  #       args: [--baseline, .secrets.baseline]
  #       exclude: package.lock.json

# æœ¬åœ°é’©å­é…ç½®
default_language_version:
  python: python3

# æœ€å° pre-commit ç‰ˆæœ¬
minimum_pre_commit_version: 3.0.0

# æ€§èƒ½ä¼˜åŒ–çš„å…¨å±€é…ç½®
default_stages: [commit]  # åªåœ¨commitæ—¶è¿è¡Œï¼Œä¸åœ¨pushæ—¶è¿è¡Œ
fail_fast: false  # ä¸è¦åœ¨ç¬¬ä¸€ä¸ªé”™è¯¯æ—¶åœæ­¢
