name: Quick Check

on:
  push:
    branches-ignore: [ main ]
    paths-ignore:
      - '**/*.md'
      - 'docs/**'
      - '.github/ISSUE_TEMPLATE/**'

concurrency:
  group: quick-check-${{ github.ref }}
  cancel-in-progress: true

jobs:
  fast:
    name: 🚀 Quick Lint & Test
    runs-on: ubuntu-latest
    timeout-minutes: 10
    steps:
      - name: Checkout
        uses: actions/checkout@v5

      - name: Set up Python 3.11
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Basic Lint Check (SOFT)
        run: |
          python -m pip install -U pip
          python -m pip install ruff==0.5.7
          python -m ruff format --check . || true
          python -m ruff check . || true

      # ✅ 只做语法编译，不 import 项目，不安装依赖
      - name: Quick syntax test (compile only)
        run: |
          python - <<'PY'
          import compileall, sys
          ok = compileall.compile_dir('aiculture', maxlevels=10, quiet=1)
          sys.exit(0 if ok else 1)
          PY

